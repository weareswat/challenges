(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3233:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var a=n(5861),r=n(7757),i=n.n(r),s=n(7294),l=n(589),c=n(7750),u=n(9062),d=n(885),o=n(2982),h=n(7896),m=n(9573),f=n(8732),x=n(6926),p=n(6011),v=n(3694),Z=n(3887),j=n(1182),g=n(6501),b=function(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n];a&&(t[n]=a)})),t},y=function(e,t){return new Array(Math.ceil(e.length/+t)).fill().map((function(n){return e.splice(0,+t)}))},w=n(5893);function _(e){var t=e.items,n=(0,s.useState)([]),a=n[0],r=n[1],i=(0,s.useState)(0),c=i[0],u=i[1];return(0,s.useEffect)((function(){if(t&&t.length>0){u(0);var e=(0,o.Z)(t),n=y(e,7),a=(0,d.Z)(n,1)[0];r(a)}}),[t]),(0,s.useEffect)((function(){if(t&&t.length>0&&c>=0){var e=(0,o.Z)(t),n=y(e,7);r(n[c])}}),[c,t]),t&&0!==t.length?(0,w.jsx)(l.ZP,{item:!0,xs:12,"data-testid":"my-table",children:(0,w.jsx)(h.Z,{component:g.Z,children:(0,w.jsxs)(m.Z,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,w.jsx)(p.Z,{children:(0,w.jsxs)(v.Z,{children:[(0,w.jsx)(x.Z,{children:"Document status"}),(0,w.jsx)(x.Z,{children:"Document type"}),(0,w.jsx)(x.Z,{children:"Number"}),(0,w.jsx)(x.Z,{children:"Client name"}),(0,w.jsx)(x.Z,{children:"Date"}),(0,w.jsx)(x.Z,{children:"Total without VAT"})]})}),(0,w.jsx)(f.Z,{children:a&&a.map((function(e,t){return(0,w.jsxs)(v.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,w.jsx)(x.Z,{children:e.status}),(0,w.jsx)(x.Z,{children:e.type}),(0,w.jsx)(x.Z,{children:e.number}),(0,w.jsx)(x.Z,{children:e.client_name}),(0,w.jsx)(x.Z,{children:e.date}),(0,w.jsx)(x.Z,{children:e.total_w_vat})]},"my-table-".concat(t))}))}),(0,w.jsx)(Z.Z,{children:(0,w.jsx)(v.Z,{children:(0,w.jsx)(j.Z,{rowsPerPageOptions:[7],colSpan:3,count:t.length,rowsPerPage:7,page:c,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:function(e,t){return u(+t)}})})})]})})}):null}_.defaultProps={items:[]};var P=_,C=n(2642),k=n(8025),S=n(7666),T=n(9722),E=n(4347),D=n(5116),R=n(1054);function z(e){var t=e.onSubmit,n=(0,R.TA)({initialValues:{status:"",type:"",number:"",client_name:"",date:"",total_w_vat:""},onSubmit:function(e){return t(e)}});return(0,w.jsxs)(l.ZP,{item:!0,xs:12,"data-testid":"my-table-filter",children:[(0,w.jsx)("h2",{children:"Filter fields:"}),(0,w.jsxs)("form",{onSubmit:n.handleSubmit,children:[(0,w.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(l.ZP,{item:!0,md:4,sm:6,xs:12,children:(0,w.jsxs)(k.Z,{sx:{width:"100%"},variant:"standard",children:[(0,w.jsx)(S.Z,{id:"document-status-label",children:"Document status"}),(0,w.jsxs)(T.Z,{size:"small",labelId:"document-status-label",id:"document-status",label:"Document status",onChange:n.handleChange,value:n.values.status,name:"status","data-testid":"status",children:[(0,w.jsx)(E.Z,{value:"",children:(0,w.jsx)("em",{children:"None"})}),(0,w.jsx)(E.Z,{value:"Draft",children:"Draft"}),(0,w.jsx)(E.Z,{value:"Final",children:"Final"}),(0,w.jsx)(E.Z,{value:"Paid",children:"Paid"}),(0,w.jsx)(E.Z,{value:"Cancelled",children:"Cancelled"})]})]})}),(0,w.jsx)(l.ZP,{item:!0,md:4,sm:6,xs:12,children:(0,w.jsxs)(k.Z,{sx:{width:"100%"},variant:"standard",children:[(0,w.jsx)(S.Z,{id:"document-type-label",children:"Document type"}),(0,w.jsxs)(T.Z,{size:"small",labelId:"document-type-label",id:"document-type",label:"Document type",onChange:n.handleChange,value:n.values.type,name:"type","data-testid":"type",children:[(0,w.jsx)(E.Z,{value:"",children:(0,w.jsx)("em",{children:"None"})}),(0,w.jsx)(E.Z,{value:"Invoice",children:"Invoice"}),(0,w.jsx)(E.Z,{value:"Invoice-Receipt",children:"Invoice-Receipt"}),(0,w.jsx)(E.Z,{value:"Receipt",children:"Receipt"})]})]})}),(0,w.jsx)(l.ZP,{item:!0,md:4,sm:6,xs:12,children:(0,w.jsx)(D.Z,{id:"number",label:"Number",variant:"standard",onChange:n.handleChange,value:n.values.number,size:"small","data-testid":"number",sx:{width:"100%"}})}),(0,w.jsx)(l.ZP,{item:!0,md:4,sm:6,xs:12,children:(0,w.jsx)(D.Z,{id:"client_name",label:"Client name",variant:"standard",onChange:n.handleChange,value:n.values.client_name,size:"small","data-testid":"client_name",name:"client_name",sx:{width:"100%"}})}),(0,w.jsx)(l.ZP,{item:!0,md:4,sm:6,xs:12,children:(0,w.jsx)(D.Z,{id:"date",label:"Date",variant:"standard",onChange:n.handleChange,value:n.values.date,size:"small",type:"date",name:"date","data-testid":"date",sx:{width:"100%"}})}),(0,w.jsx)(l.ZP,{item:!0,md:4,sm:6,xs:12,children:(0,w.jsx)(D.Z,{id:"total_w_vat",name:"total_w_vat","data-testid":"total_w_vat",label:"Total without VAT",variant:"standard",onChange:n.handleChange,value:n.values.total_w_vat,size:"small",type:"number",sx:{width:"100%"}})})]}),(0,w.jsx)("div",{style:{marginTop:15},children:(0,w.jsx)(C.Z,{variant:"contained",type:"submit",children:"Submit"})})]})]})}z.defaultProps={onSubmit:function(){}};var I=z,N=n(5671),A=n(7326),O=n(136),F=n(6215),V=n(1120),B=n(4942),W=n(3144),X=n(9669),M=n.n(X);function q(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var G=new WeakSet;function H(){return"".concat("http://localhost:3000").concat(this.pathPrefix).concat(this.path)}function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,V.Z)(e);if(t){var r=(0,V.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,F.Z)(this,n)}}var K=function(e){(0,O.Z)(n,e);var t=J(n);function n(){var e;(0,N.Z)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),(0,B.Z)((0,A.Z)(e),"path","/documents"),e}return n}(function(){function e(){(0,N.Z)(this,e),G.add(this),(0,B.Z)(this,"pathPrefix","/api"),(0,B.Z)(this,"path","/base")}return(0,W.Z)(e,[{key:"getAll",value:function(){var e=(0,a.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M().get(q(this,G,H).call(this),{params:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),L=n(3852);function Q(){var e=(0,s.useState)([]),t=e[0],n=e[1],r=(0,s.useContext)(L.m),d=r.dispatch,o=r.state,h=function(){var e=(0,a.Z)(i().mark((function e(){var t,a,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d({type:"loadingToggle"}),t=new K,e.next=5,t.getAll();case 5:a=e.sent,r=a.data,s=(null===r||void 0===r?void 0:r.documents)||[],d({type:"setDocuments",payload:s}),n(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Error",e.t0);case 15:d({type:"loadingToggle"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){h()}),[]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.ZP,{item:!0,xs:12,children:(0,w.jsx)("h1",{children:"Invoices list"})}),(0,w.jsx)(I,{onSubmit:function(e){d({type:"loadingToggle"}),d({type:"setFilter",payload:e||{}});var t=function(e,t){var n=b(t);if(n){var a=Object.keys(n);return e.filter((function(e){for(var t=!0,r=0;r<a.length;r++){var i=a[r];if("client_name"===i){if(!new RegExp("".concat(n[i]),"g").test(e[i])){t=!1;break}}else if(n[i]!==e[i]){t=!1;break}}return t}))}return e}(o.documents,e);n(t),d({type:"loadingToggle"})}}),(0,w.jsx)(P,{items:t}),(0,w.jsx)(c.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:o.loading,children:(0,w.jsx)(u.Z,{color:"inherit"})})]})}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3233)}])}},function(e){e.O(0,[542,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);